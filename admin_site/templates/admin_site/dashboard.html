{% extends 'admin_site/layout.html' %}
{% load static %}
{% load humanize %}
{% block 'main' %}
<div class="row">
    <div class="col-xl-9 col-xxl-12">
        <div class="row">
            <div class="col-xl-12">
                <div class="row">
                    <div class="col-xl-6">
                        <div class="row">
                            <div class="col-xl-6 col-sm-6">
                                <div class="card bg-primary text-white">
                                    <div class="card-header border-0 flex-wrap">
                                        <div class="revenue-date">
                                            <span>Today Revenues</span>
                                            <h4 class="text-white">N {{ today_income|floatformat|intcomma }}</h4>
                                        </div>
                                        <div class="avatar-list avatar-list-stacked me-2">
                                            <span class="avatar rounded-circle bg-white">
                                                <a href="{% url 'income_create' %}" title="Record New Income">
                                                    <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.83333 6.27083V1.60417C5.83333 0.959834 6.35567 0.4375 7 0.4375C7.64433 0.4375 8.16667 0.959834 8.16667 1.60417V6.27083H12.8333C13.4777 6.27083 14 6.79317 14 7.4375C14 8.08183 13.4777 8.60417 12.8333 8.60417H8.16667V13.2708C8.16667 13.9152 7.64433 14.4375 7 14.4375C6.35567 14.4375 5.83333 13.9152 5.83333 13.2708V8.60417H1.16667C0.522334 8.60417 0 8.08183 0 7.4375C0 6.79317 0.522334 6.27083 1.16667 6.27083H5.83333Z" fill="#222B40"/>
                                                    </svg>
                                                </a>
                                            </span>
                                        </div>

                                    </div>
                                    <div class="card-body pb-0 custome-tooltip d-flex align-items-center">
                                        <div id="chartBar" class="chartBar"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-sm-6">
                                <div class="card bg-secondary text-white">
                                    <div class="card-header border-0">
                                        <div class="revenue-date">
                                            <span class="text-black">Today Expenses</span>
                                            <h4 class="text-black">N{{today_expense|floatformat|intcomma}}</h4>
                                        </div>
                                        <div class="avatar-list avatar-list-stacked me-2">
                                            <span class="avatar rounded-circle bg-white">
                                                <a href="{% url 'expense_create' %}" title="Record New Expense">
                                                    <svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.83333 6.27083V1.60417C5.83333 0.959834 6.35567 0.4375 7 0.4375C7.64433 0.4375 8.16667 0.959834 8.16667 1.60417V6.27083H12.8333C13.4777 6.27083 14 6.79317 14 7.4375C14 8.08183 13.4777 8.60417 12.8333 8.60417H8.16667V13.2708C8.16667 13.9152 7.64433 14.4375 7 14.4375C6.35567 14.4375 5.83333 13.9152 5.83333 13.2708V8.60417H1.16667C0.522334 8.60417 0 8.08183 0 7.4375C0 6.79317 0.522334 6.27083 1.16667 6.27083H5.83333Z" fill="#222B40"/>
                                                    </svg>
                                                </a>
                                            </span>
                                        </div>

                                    </div>
                                    <div class="card-body pb-0 custome-tooltip d-flex align-items-center">
                                        <div id="expensesChart" class="chartBar"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-sm-6">
                                <div class="card">
                                    <div class="card-body depostit-card">
                                        <div class="depostit-card-media d-flex justify-content-between style-1">
                                            <div>
                                                <h6>Today's Date</h6>
                                                <h3>{% now '' %}</h3>
                                            </div>
                                            <div class="icon-box bg-secondary">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g clip-path="url(#clip0_3_566)">
                                                    <path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M8 3V3.5C8 4.32843 8.67157 5 9.5 5H14.5C15.3284 5 16 4.32843 16 3.5V3H18C19.1046 3 20 3.89543 20 5V21C20 22.1046 19.1046 23 18 23H6C4.89543 23 4 22.1046 4 21V5C4 3.89543 4.89543 3 6 3H8Z" fill="#222B40"/>
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.875 15.75C10.6354 15.75 10.3958 15.6542 10.2042 15.4625L8.2875 13.5458C7.90417 13.1625 7.90417 12.5875 8.2875 12.2042C8.67083 11.8208 9.29375 11.8208 9.62917 12.2042L10.875 13.45L14.0375 10.2875C14.4208 9.90417 14.9958 9.90417 15.3792 10.2875C15.7625 10.6708 15.7625 11.2458 15.3792 11.6292L11.5458 15.4625C11.3542 15.6542 11.1146 15.75 10.875 15.75Z" fill="#222B40"/>
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M11 2C11 1.44772 11.4477 1 12 1C12.5523 1 13 1.44772 13 2H14.5C14.7761 2 15 2.22386 15 2.5V3.5C15 3.77614 14.7761 4 14.5 4H9.5C9.22386 4 9 3.77614 9 3.5V2.5C9 2.22386 9.22386 2 9.5 2H11Z" fill="#222B40"/>
                                                    </g>
                                                    <defs>
                                                    <clipPath id="clip0_3_566">
                                                    <rect width="24" height="24" fill="white"/>
                                                    </clipPath>
                                                    </defs>
                                                </svg>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-sm-6">
                                <div class="card same-card">
                                    <div class="card-body depostit-card p-0">
                                        <div class="depostit-card-media d-flex justify-content-between pb-0">
                                            <div>
                                                <h6>Today's Profit</h6>
                                                <h3 class="{% if today_profit > 0 %} text-success {% elif today_profit < 0 %} text-danger {% endif %}">N {{ today_profit|floatformat|intcomma }}</h3>
                                            </div>
                                            <div class="icon-box bg-primary">
                                                <svg width="12" height="20" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M11.4642 13.7074C11.4759 12.1252 10.8504 10.8738 9.60279 9.99009C8.6392 9.30968 7.46984 8.95476 6.33882 8.6137C3.98274 7.89943 3.29927 7.52321 3.29927 6.3965C3.29927 5.14147 4.93028 4.69493 6.32655 4.69493C7.34341 4.69493 8.51331 5.01109 9.23985 5.47964L10.6802 3.24887C9.73069 2.6333 8.43112 2.21342 7.14783 2.0831V0H4.49076V2.22918C2.12884 2.74876 0.640949 4.29246 0.640949 6.3965C0.640949 7.87005 1.25327 9.03865 2.45745 9.86289C3.37331 10.4921 4.49028 10.83 5.56927 11.1572C7.88027 11.8557 8.81873 12.2813 8.80805 13.691L8.80799 13.7014C8.80799 14.8845 7.24005 15.3051 5.89676 15.3051C4.62786 15.3051 3.248 14.749 2.46582 13.9222L0.535522 15.7481C1.52607 16.7957 2.96523 17.5364 4.4907 17.8267V20.0001H7.14783V17.8735C9.7724 17.4978 11.4616 15.9177 11.4642 13.7074Z" fill="#fff"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-3 col-xxl-6 col-md-6">
						<div class="card">
							<div class="card-header border-0">
								<div>
									<h4 class="heading mb-0">Activity Log</h4>
									<span>Most Recent Activities</span>
								</div>
							</div>
							<div class="card-body px-0 pt-0">
								<div class="activity-sale dz-scroll">
                                    {% if recent_activity_list %}
                                    {% for activity in recent_activity_list %}
									<div class="d-flex recent-activity">
										<span class="me-3 activity">
											<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 17 17">
											  <circle cx="8.5" cy="8.5" r="8.5" {% if activity.category == 'expense_registration' %} fill="#f93a0b" {% else %} fill="#00ff37" {% endif %}></circle>
											</svg>
										</span>
										<div class="d-flex align-items-center">
											<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 71 71">
											  <g transform="translate(-457 -443)">
												<rect width="71" height="71" rx="12" transform="translate(457 443)" fill="#c5c5c5"></rect>
												<g transform="translate(457 443)">
												  <rect data-name="placeholder" width="71" height="71" rx="12" fill="#2769ee"></rect>
												  <circle data-name="Ellipse 12" cx="18" cy="18" r="18" transform="translate(15 20)" fill="#fff"></circle>
												  <circle data-name="Ellipse 11" cx="11" cy="11" r="11" transform="translate(36 15)" fill="#ffe70c" style="mix-blend-mode: multiply;isolation: isolate"></circle>
												</g>
											  </g>
											</svg>
                                            <a
                                                    {% if activity.category == 'patient_registration' %} href="{% url 'patient_detail' activity.reference_id %}"
                                                    {% elif activity.category == 'staff_registration' %} href="{% url 'staff_detail' activity.reference_id %}"
                                                    {% elif activity.category == 'expense_registration' %} href="{% url 'expense_detail' activity.reference_id %}"
                                                    {% elif activity.category == 'income_registration' %} href="{% url 'income_detail' activity.reference_id %}"
                                                    {% endif %}>
                                                <div class="ms-3 active-data">
												<h5 class="mb-1">{{ activity.subject }}</h5>
												<span>{{ activity.created_at|naturaltime }}</span>
											</div>
                                            </a>

										</div>
									</div>
                                    {% endfor %}

                                    {% else %}
                                    <p class="text-center">No Recent Activity</p>
                                    {% endif %}


								</div>
							</div>
						</div>
					</div>


                    <div class="col-xl-3 col-sm-6">
                        <div class="card bg-success rainbow-box" style="background-image: url({% static 'admin_site/images/rainbow.gif' %});background-size: cover;background-blend-mode: luminosity;">
                            <div class="card-header border-0">
                                <svg width="43" height="40" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M41.605 3.94728L34.9548 0.107383C34.7065 -0.0357944 34.4007 -0.0357944 34.1525 0.107383C26.172 4.71641 16.338 4.71713 8.35679 0.108821L8.35391 0.107383C8.10569 -0.0357944 7.7999 -0.0357944 7.55168 0.107383L0.901472 3.94656C0.65325 4.08974 0.5 4.35451 0.5 4.64159V12.3207C0.5 12.6077 0.65325 12.8725 0.901472 13.0157C8.88345 17.6225 13.8004 26.1384 13.8004 35.355V35.3579C13.8004 35.6442 13.9537 35.9097 14.2019 36.0529L20.8521 39.8928C20.9766 39.9647 21.1147 40 21.2536 40C21.3924 40 21.5306 39.964 21.655 39.8928L28.3053 36.0529C28.5535 35.9097 28.7067 35.645 28.7067 35.3579C28.706 26.1413 33.623 17.6247 41.605 13.0164L41.6064 13.0157C41.8546 12.8725 42.0079 12.6077 42.0079 12.3207V4.6423C42.0057 4.35523 41.8532 4.09046 41.605 3.94728ZM40.4013 11.858L20.8514 23.1453C20.6032 23.2885 20.4499 23.5533 20.4499 23.8403V29.8891C19.8168 30.2013 19.3923 30.8712 19.439 31.6345C19.4944 32.5325 20.2139 33.2627 21.1118 33.3304C22.1788 33.4109 23.0696 32.5684 23.0696 31.5187C23.0696 30.8035 22.6559 30.1848 22.0551 29.8883C22.0551 26.4319 23.8991 23.2381 26.8922 21.5099L27.0994 21.3905L27.1001 34.8952L21.2521 38.2718L15.4042 34.8952V12.3214C15.4042 12.035 15.2509 11.7695 15.0027 11.6264L9.76338 8.60163C9.76626 8.56206 9.7677 8.52249 9.7677 8.4822C9.7677 7.45549 8.91583 6.62736 7.88049 6.66694C6.93868 6.70291 6.17171 7.46988 6.13573 8.41169C6.09616 9.44703 6.92429 10.2996 7.951 10.2996C8.32513 10.2996 8.67264 10.1867 8.96115 9.99312C11.9542 11.7213 13.7983 14.9151 13.7983 18.3715V18.6097L2.10229 11.8587V5.10637L7.95028 1.72982L27.5002 13.0171C27.7484 13.1603 28.0542 13.1603 28.3024 13.0171L33.541 9.9924C33.8324 10.1881 34.1842 10.3011 34.5619 10.2989C35.5526 10.2931 36.3664 9.47581 36.3678 8.48508C36.3693 7.47996 35.5555 6.66549 34.5511 6.66549C33.5474 6.66549 32.7344 7.47923 32.7344 8.4822C32.7344 8.52249 32.7359 8.56206 32.7387 8.60163C29.745 10.3298 26.0569 10.3298 23.0631 8.60163L22.8573 8.48292L34.5511 1.72982L40.3991 5.10637V11.858H40.4013Z" fill="white"/>
                                </svg>
                            </div>
                            <div class="card-body pt-0">
                                <div class="finance">
                                    <h4>All in One Hospital Software</h4>
                                    <p>
                                        We have an outstanding performance in software development and is dedicated to serving you always.
                                        Reach out to us whenever required.
                                    </p>
                                </div>
                                <div class="d-flex pt-3">
                                    <div class="avatar-list avatar-list-stacked">
                                        <a style="color:black;font-size:20px" href="https://balablutech.com" target="_blank">www.balablutech.com</a>
                                        <a style="color:black;font-size:20px" href="mail-to:info@balablutech.com" target="_blank">info@balablutech.com</a>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6">
                        <div class="card">
                            <div class="card-body">
                                <div id="redial"></div>
                                <span class="right-sign">
                                    <svg width="93" height="93" viewBox="0 0 93 93" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g filter="url(#filter0_d_3_700)">
                                        <circle cx="46.5" cy="31.5" r="16.5" fill="#F8B940"/>
                                        </g>
                                        <g clip-path="url(#clip0_3_700)">
                                        <path d="M52.738 25.3524C53.0957 24.9315 53.7268 24.8804 54.1476 25.2381C54.5684 25.5957 54.6196 26.2268 54.2619 26.6476L45.7619 36.6476C45.3986 37.0751 44.7549 37.1201 44.3356 36.7474L39.8356 32.7474C39.4228 32.3805 39.3857 31.7484 39.7526 31.3356C40.1195 30.9229 40.7516 30.8857 41.1643 31.2526L44.9002 34.5733L52.738 25.3524Z" fill="#222B40"/>
                                        </g>
                                        <defs>
                                        <filter id="filter0_d_3_700" x="0" y="0" width="93" height="93" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                                        <feOffset dy="15"/>
                                        <feGaussianBlur stdDeviation="15"/>
                                        <feComposite in2="hardAlpha" operator="out"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3_700"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3_700" result="shape"/>
                                        </filter>
                                        <clipPath id="clip0_3_700">
                                        <rect width="24" height="24" fill="white" transform="translate(35 19)"/>
                                        </clipPath>
                                        </defs>
                                    </svg>
                                </span>
                                <div class="redia-date text-center">
                                    <h4>Returning Patient</h4>
                                    <p>
                                        This is the percentage of patient have done at least a transaction for the month of {% now 'M - Y' %}
                                    </p>
                                    <a href="{% url 'returning_patient_index' %}" class="btn btn-secondary text-black">View Patients</a>
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="col-xl-6">
                        <div class="row">
                            <div class="col-xl-6 col-sm-6">
                                <div class="card bg-primary text-white">
                                    <div class="card-header border-0 flex-wrap">
                                        <div class="revenue-date">
                                            <span>Number of Patients</span>
                                            <h4 class="text-white text-center">{{ number_of_patient }}</h4>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-sm-6">
                                <div class="card bg-secondary text-white">
                                    <div class="card-header border-0">
                                        <div class="revenue-date">
                                            <span class="text-black">Returning Patient</span>
                                            <h4 class="text-black text-center">{{ returning_patient }}</h4>
                                        </div>

                                    </div>

                                </div>
                            </div>


                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-xl-6 col-sm-6">
                                        <div class="card">
                                            <div class="card-body d-flex justify-content-between align-items-center">
                                                <div class="d-flex">
                                                    <div class="icon-box icon-box-md bg-danger-light me-1">
                                                        <i class="fa-solid fa-box text-danger"></i>
                                                    </div>
                                                    <div class="ms-2">
                                                        <h4>{{ number_of_department }}</h4>
                                                        <p class="mb-0">Departments</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6 col-sm-6">
                                        <div class="card">
                                            <div class="card-body d-flex justify-content-between align-items-center">
                                                <div class="d-flex">
                                                    <div class="icon-box icon-box-md bg-primary-light me-1">
                                                        <i class="fa-solid fa-users text-primary"></i>
                                                    </div>
                                                    <div class="ms-2">
                                                        <h4>{{number_of_staff}}</h4>
                                                        <p class="mb-0">Staff</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6 col-sm-6">
                                        <div class="card">
                                            <div class="card-body d-flex justify-content-between align-items-center">
                                                <div class="d-flex">
                                                    <div class="icon-box icon-box-md bg-info-light me-1">
                                                        <i class="fa-solid fa-box text-info"></i>
                                                    </div>
                                                    <div class="ms-2">
                                                        <h4>N {{ worth_of_drug|floatformat|intcomma }}</h4>
                                                        <p class="mb-0">Worth of Available Drug</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6 col-sm-6">
                                        <div class="card">
                                            <div class="card-body d-flex justify-content-between align-items-center">
                                                <div class="d-flex">
                                                    <div class="icon-box icon-box-md bg-secondary-light me-1">
                                                        <i class="fa-solid fa-box text-secondary"></i>
                                                    </div>
                                                    <div class="ms-2">
                                                        <h4>N {{ worth_of_inventory|floatformat|intcomma }}</h4>
                                                        <p class="mb-0">Worth of Other Inventory</p>
                                                    </div>
                                                </div>
                                              </div>
                                        </div>
                                    </div>
                                </div>
                            </div>





                        </div>
                    </div>

                    <div class="col-xl-8">
                        <div class="card overflow-hidden">
                            <div class="card-header border-0 pb-0 flex-wrap">
                                <h4 class="heading mb-0">LAst 7 Days Revenue Chart</h4>
                            </div>
                            <div class="card-body custome-tooltip p-0">
                                    <div id="overiewChart"></div>
                                <div class="ttl-project">
                                    <div class="pr-data">
                                        <h5>N{{ income_7|floatformat|intcomma }}</h5>
                                        <span>Last 7 Days Income</span>
                                    </div>
                                    <div class="pr-data">
                                        <h5 class="text-primary">N{{ expense_7|floatformat|intcomma }}</h5>
                                        <span>Last 7 Days Expense</span>
                                    </div>
                                    <div class="pr-data">
                                        <h5>N{{ profit_7|floatformat|intcomma }}</h5>
                                        <span>Last 7 Days Profit</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4">
                        <div class="card">
                            <div class="card-header border-0 flex-wrap">
                                <h4 class="heading mb-0">My Notes</h4>
                                <div>
                                    <a class="text-black"  data-bs-toggle="modal" data-bs-target="#addNote"> + Add Note</a>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="dt-do-bx">
                                    <div class="draggable-zone dropzoneContainer to-dodroup dz-scroll">
                                        {% for note in note_list %}
                                        <div class="sub-card draggable-handle draggable">
                                            <div class="d-items">
                                                <span class="text-warning dang d-block mb-2">
                                                    <svg class="me-1" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.61051 15.3276H14.3978C15.5843 15.3276 16.329 14.0451 15.7395 13.0146L10.35 3.59085C9.75676 2.5536 8.26126 2.55285 7.66726 3.5901L2.26876 13.0139C1.67926 14.0444 2.42326 15.3276 3.61051 15.3276Z" stroke="#FF9F00" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                            <path d="M9.00189 10.0611V7.7361" stroke="#FF9F00" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                            <path d="M8.99625 12.375H9.00375" stroke="#FF9F00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                        </svg>
                                                    Note
                                                </span>
                                                <div class="d-flex justify-content-between flex-wrap">
                                                    <div class="d-items-2">
                                                        <div class="svg-icon">
                                                            <svg width="9" height="16" viewBox="0 0 9 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <rect width="1" height="1" fill="#888888"/>
                                                                <rect y="3" width="1" height="1" fill="#888888"/>
                                                                <rect y="6" width="1" height="1" fill="#888888"/>
                                                                <rect y="9" width="1" height="1" fill="#888888"/>
                                                                <rect y="12" width="1" height="1" fill="#888888"/>
                                                                <rect y="15" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" y="3" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" y="6" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" y="9" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" y="12" width="1" height="1" fill="#888888"/>
                                                                <rect x="4" y="15" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" y="3" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" y="6" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" y="9" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" y="12" width="1" height="1" fill="#888888"/>
                                                                <rect x="8" y="15" width="1" height="1" fill="#888888"/>
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <div class="form-check custom-checkbox">
                                                                <input type="checkbox" class="form-check-input" id="customCheckBox{{forloop.conter}}" required>
                                                                <label class="form-check-label" for="customCheckBox{{forloop.conter}}">{{ note.subject }}</label>
                                                            </div>
                                                            <span>{{ note.created_at }}</span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="icon-box icon-box-sm bg-danger-light me-1" data-bs-toggle="modal" data-bs-target="#deleteNote{{forloop.counter}}">
                                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M12.8833 6.31213C12.8833 6.31213 12.5213 10.8021 12.3113 12.6935C12.2113 13.5968 11.6533 14.1261 10.7393 14.1428C8.99994 14.1741 7.25861 14.1761 5.51994 14.1395C4.64061 14.1215 4.09194 13.5855 3.99394 12.6981C3.78261 10.7901 3.42261 6.31213 3.42261 6.31213" stroke="#FF5E5E" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path d="M13.8055 4.1598H2.50012" stroke="#FF5E5E" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path d="M11.6271 4.1598C11.1037 4.1598 10.6531 3.7898 10.5504 3.27713L10.3884 2.46647C10.2884 2.09247 9.94974 1.8338 9.56374 1.8338H6.74174C6.35574 1.8338 6.01707 2.09247 5.91707 2.46647L5.75507 3.27713C5.65241 3.7898 5.20174 4.1598 4.67841 4.1598" stroke="#FF5E5E" stroke-linecap="round" stroke-linejoin="round"/>
                                                            </svg>
                                                        </div>
                                                        <div class="icon-box icon-box-sm bg-primary-light" data-bs-toggle="modal" data-bs-target="#editNote{{forloop.counter}}">
                                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M9.16492 13.6286H14" stroke="#0D99FF" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.52001 2.52986C9.0371 1.91186 9.96666 1.82124 10.5975 2.32782C10.6324 2.35531 11.753 3.22586 11.753 3.22586C12.446 3.64479 12.6613 4.5354 12.2329 5.21506C12.2102 5.25146 5.87463 13.1763 5.87463 13.1763C5.66385 13.4393 5.34389 13.5945 5.00194 13.5982L2.57569 13.6287L2.02902 11.3149C1.95244 10.9895 2.02902 10.6478 2.2398 10.3849L8.52001 2.52986Z" stroke="#0D99FF" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path d="M7.34723 4.00059L10.9821 6.79201" stroke="#0D99FF" stroke-linecap="round" stroke-linejoin="round"/>
                                                            </svg>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-6 col-xxl-12">
        <div class="card">
            <div class="card-body p-0">
                <div class="table-responsive active-projects">
                <div class="tbl-caption">
                    <h4 class="heading mb-0">Returning Patient for {% now '' %}</h4>
                </div>
                    <table id="projects-tbl" class="table">
                        <thead>
                            <tr>
                                <th>Patient Name</th>
                                <th>Card Number</th>
                                <th>Gender</th>
                                <th>Phone Number</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for patient in today_returning_patient_list %}
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{% if patient.image %}{{patient.image.url}}{% else %}{% static 'admin_site/images/default_image.jpg' %}{% endif %}" class="avatar avatar-md rounded-circle" alt="">
                                        <p class="mb-0 ms-2">{{patient|title}}</p>
                                    </div>
                                </td>
                                <td>{{ patient.card_number|upper }}</td>
                                <td>{{ patient.gender|title }}</td>
                                <td>{{ patient.phone_number }}</td>

                                <td>
									<div class="dropdown">
										<div class="btn-link" data-bs-toggle="dropdown" aria-expanded="false">
											<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path d="M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
												<path d="M18 12C18 12.5523 18.4477 13 19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
												<path d="M4 12C4 12.5523 4.44772 13 5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12Z" stroke="#737B8B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
											</svg>
										</div>
										<div class="dropdown-menu dropdown-menu-right" style="">
											<a class="dropdown-item text-primary" href="{% url 'patient_detail' patient.id %}">Detail</a>
                                        </div>
									</div>
                                </td>

                            </tr>
                        {% endfor %}


                        </tbody>

                    </table>
                </div>
            </div>
        </div>
    </div>

</div>


{% endblock %}

{% block 'script' %}
<script>


(function($) {
    /* "use strict" */

 var dzChartlist = function(){

	var screenWidth = $(window).width();
	let draw = Chart.controllers.line.__super__.draw; //draw shadow

	var NewExperience = function(){
		var options = {
		  series: [
			{
				name: 'Net Profit',
				data: [100,300, 200, 250, 200, 240, 180,230,200, 250, 300],
				/* radius: 30,	 */
			},
		],
			chart: {
			type: 'area',
			height: 40,
			//width: 400,
			toolbar: {
				show: false,
			},
			zoom: {
				enabled: false
			},
			sparkline: {
				enabled: true
			}

		},

		colors:['var(--primary)'],
		dataLabels: {
		  enabled: false,
		},

		legend: {
			show: false,
		},
		stroke: {
		  show: true,
		  width: 2,
		  curve:'straight',
		  colors:['var(--primary)'],
		},

		grid: {
			show:false,
			borderColor: '#eee',
			padding: {
				top: 0,
				right: 0,
				bottom: 0,
				left: -1

			}
		},
		states: {
                normal: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                hover: {
                    filter: {
                        type: 'none',
                        value: 0
                    }
                },
                active: {
                    allowMultipleDataPointsSelection: false,
                    filter: {
                        type: 'none',
                        value: 0
                    }
                }
            },
		xaxis: {
			categories: ['Jan', 'feb', 'Mar', 'Apr', 'May', 'June', 'July','August', 'Sept','Oct'],
			axisBorder: {
				show: false,
			},
			axisTicks: {
				show: false
			},
			labels: {
				show: false,
				style: {
					fontSize: '12px',
				}
			},
			crosshairs: {
				show: false,
				position: 'front',
				stroke: {
					width: 1,
					dashArray: 3
				}
			},
			tooltip: {
				enabled: true,
				formatter: undefined,
				offsetY: 0,
				style: {
					fontSize: '12px',
				}
			}
		},
		yaxis: {
			show: false,
		},
		fill: {
		  opacity: 0.9,
		  colors:'var(--primary)',
		  type: 'gradient',
		  gradient: {
			colorStops:[

				{
				  offset: 0,
				  color: 'var(--primary)',
				  opacity: .5
				},
				{
				  offset: 0.6,
				  color: 'var(--primary)',
				  opacity: .5
				},
				{
				  offset: 100,
				  color: 'white',
				  opacity: 0
				}
			  ],

			}
		},
		tooltip: {
			enabled:false,
			style: {
				fontSize: '12px',
			},
			y: {
				formatter: function(val) {
					return "$" + val + " thousands"
				}
			}
		}
		};

		var chartBar1 = new ApexCharts(document.querySelector("#NewExperience"), options);
		chartBar1.render();

	}
	var AllProject = function(){
		var options = {
			series: [12, 30, 20],
         chart: {
			type: 'donut',
			width: 150,
		},
       plotOptions: {
			pie: {
			  donut: {
				size: '80%',
				labels: {
					show: true,
					name: {
						show: true,
						offsetY: 12,
					},
					value: {
						show: true,
						fontSize: '22px',
						fontFamily:'Arial',
						fontWeight:'500',
						offsetY: -17,
					},
					total: {
						show: true,
						fontSize: '11px',
						fontWeight:'500',
						fontFamily:'Arial',
						label: 'Compete',

						formatter: function (w) {
						  return w.globals.seriesTotals.reduce((a, b) => {
							return a + b
						  }, 0)
						}
					}
				}
			  }
			}
		},
		 legend: {
                show: false,
            },
		 colors: ['#3AC977', 'var(--primary)', 'var(--secondary)'],
			labels: ["Compete", "Pending", "Not Start"],
			dataLabels: {
				enabled: false,
			},
        };
		var chartBar1 = new ApexCharts(document.querySelector("#AllProject"), options);
		chartBar1.render();

	}

	var overiewChart = function(){
		 var options = {
          series: [{
          name: 'Profit',
          type: 'column',
          data: [{% for profit in profit_7_list %} {{profit}},{% endfor %}]
        }, {
          name: 'Income',
          type: 'area',
          data: [{% for income in income_7_list %} {{income}},{% endfor %}]
        }, {
          name: 'Expenses',
          type: 'line',
          data: [{% for expense in expense_7_list %} {{expense}},{% endfor %}]
        }],
          chart: {
          height: 300,
          type: 'line',
          stacked: false,
		  toolbar: {
				show: false,
			},
        },
        stroke: {
          width: [0, 1, 1],
          curve: 'straight',
		  dashArray: [0, 0, 5]
        },
		legend: {
			fontSize: '13px',
			fontFamily: 'poppins',
			 labels: {
				  colors:'#888888',
			 }
		},
        plotOptions: {
          bar: {
            columnWidth: '18%',
			 borderRadius:6	,
          }
        },

        fill: {
          //opacity: [0.1, 0.1, 1],
		  type : 'gradient',
          gradient: {
            inverseColors: false,
            shade: 'light',
            type: "vertical",
            /* opacityFrom: 0.85,
            opacityTo: 0.55, */
			colorStops : [
				[
					{
					  offset: 0,
					  color: 'var(--primary)',
					  opacity: 1
					},
					{
					  offset: 100,
					  color: 'var(--primary)',
					  opacity: 1
					}
				],
				[
					{
					  offset: 0,
					  color: '#3AC977',
					  opacity: 1
					},
					{
					  offset: 0.4,
					  color: '#3AC977',
					  opacity: .15
					},
					{
					  offset: 100,
					  color: '#3AC977',
					  opacity: 0
					}
				],
				[
					{
					  offset: 0,
					  color: '#FF5E5E',
					  opacity: 1
					},
					{
					  offset: 100,
					  color: '#FF5E5E',
					  opacity: 1
					}
				],
			],
            stops: [0, 100, 100, 100]
          }
        },
		colors:["var(--primary)","#3AC977","#FF5E5E"],
        labels: [{% for day in date_7_list %} '{{day|title}}', {% endfor %}
        ],
        markers: {
          size: 0
        },
        xaxis: {
          type: 'month',
		  labels: {
			   style: {
				   fontSize: '13px',
				   colors:'#888888',
			   },
		  },
        },
        yaxis: {
          min: 0,
		  tickAmount: 4,
		  labels: {
			   style: {
				   fontSize: '13px',
				   colors:'#888888',
			   },
		  },
        },
        tooltip: {
          shared: true,
          intersect: false,
          y: {
            formatter: function (y) {
              if (typeof y !== "undefined") {
                return "N" + y.toFixed(0);
              }
              return y;

            }
          }
        }
        };

        var chart = new ApexCharts(document.querySelector("#overiewChart"), options);
        chart.render();


	}

	var chartBar = function(){
		var options = {
			  series: [
				{% for name, income in income_list.items %}
				{
					name: '{{name|title}}',
					data: [{{income|floatformat}}],
					radius: 12,
				},

				{% endfor %}

			],
				chart: {
				type: 'bar',
				height: 120,

				toolbar: {
					show: false,
				},

			},
			plotOptions: {
			  bar: {
				horizontal: false,
				columnWidth: '50%',
				endingShape: "rounded",
				borderRadius: 8,
			  },

			},
			states: {
			  hover: {
				filter: 'none',
			  }
			},
			colors:['#F8B940', '#FFFFFF'],
			dataLabels: {
			  enabled: false,
			  offsetY: -30
			},

			legend: {
				show: false,
				fontSize: '12px',
				labels: {
					colors: '#000000',

					},
				markers: {
				width: 18,
				height: 18,
				strokeWidth: 8,
				strokeColor: '#fff',
				fillColors: undefined,
				radius: 12,
				}
			},
			stroke: {
			  show: true,
			  width:14,
			  curve: 'smooth',
			  lineCap: 'round',
			  colors: ['transparent']
			},
			grid: {
				show: false,
				xaxis: {
					lines: {
						show: false,
					}
				},
				 yaxis: {
						lines: {
							show: false
						}
					},
			},
			xaxis: {
				categories: ['JAN', 'FEB', 'MAR', 'APR', 'MAY'],
				labels: {
					show: false,
					style: {
						colors: '#A5AAB4',
						fontSize: '14px',
						fontWeight: '500',
						fontFamily: 'poppins',
						cssClass: 'apexcharts-xaxis-label',
					},
				},
				crosshairs: {
					show: false,
				},
				axisBorder: {
					show: false,
				},
				axisTicks: {
					show: false,
				},
			},
			yaxis: {
				labels: {
				show: false,
					offsetX:-16,
				   style: {
					  colors: '#000000',
					  fontSize: '13px',
					   fontFamily: 'poppins',
					  fontWeight: 100,
					  cssClass: 'apexcharts-xaxis-label',
				  },
			  },
			},
			};

			var chartBar1 = new ApexCharts(document.querySelector("#chartBar"), options);
			chartBar1.render();
	}

	var expensesChart = function(){
		var options = {
			  series: [
			    {% for name, expense in expense_list.items %}
				{
					name: '{{name|title}}',
					data: [{{expense|floatformat}}],
					radius: 12,
				},

				{% endfor %}

			],
				chart: {
				type: 'bar',
				height: 120,

				toolbar: {
					show: false,
				},

			},
			plotOptions: {
			  bar: {
				horizontal: false,
				columnWidth: '60%',
				endingShape: "rounded",
				borderRadius: 8,
			  },

			},
			states: {
			  hover: {
				filter: 'none',
			  }
			},
			colors:['#FFFFFF', '#222B40'],
			dataLabels: {
			  enabled: false,
			  offsetY: -30
			},

			legend: {
				show: false,
				fontSize: '12px',
				labels: {
					colors: '#000000',

					},
				markers: {
				width: 18,
				height: 18,
				strokeWidth: 8,
				strokeColor: '#fff',
				fillColors: undefined,
				radius: 12,
				}
			},
			stroke: {
			  show: true,
			  width:14,
			  curve: 'smooth',
			  lineCap: 'round',
			  colors: ['transparent']
			},
			grid: {
				show: false,
				xaxis: {
					lines: {
						show: false,
					}
				},
				 yaxis: {
						lines: {
							show: false
						}
					},
			},
			xaxis: {
				categories: ['JAN', 'FEB', 'MAR', 'APR', 'MAY'],
				labels: {
					show: false,
					style: {
						colors: '#A5AAB4',
						fontSize: '14px',
						fontWeight: '500',
						fontFamily: 'poppins',
						cssClass: 'apexcharts-xaxis-label',
					},
				},
				crosshairs: {
					show: false,
				},
				axisBorder: {
					show: false,
				},
				axisTicks: {
					show: false,
				},
			},
			yaxis: {
				labels: {
				show: false,
					offsetX:-16,
				   style: {
					  colors: '#000000',
					  fontSize: '13px',
					   fontFamily: 'poppins',
					  fontWeight: 100,
					  cssClass: 'apexcharts-xaxis-label',
				  },
			  },
			},
			};

			var chartBar1 = new ApexCharts(document.querySelector("#expensesChart"), options);
			chartBar1.render();
	}
	var redial = function(){
		var options = {
		series: [{{returning_patient_percentage}}],
		chart: {
		type: 'radialBar',
		offsetY: 0,
		height:160,
		sparkline: {
		  enabled: true
		}
	  },
	  plotOptions: {
		radialBar: {
		  startAngle: -180,
		  endAngle: 180,
		  track: {
			background: "#F1EAFF",
			strokeWidth: '100%',
			margin: 3,
		  },

		  hollow: {
			margin: 20,
			size: '60%',
			background: 'transparent',
			image: undefined,
			imageOffsetX: 0,
			imageOffsetY: 0,
			position: 'front',
		  },

		  dataLabels: {
			name: {
			  show: false
			},
			value: {
			  offsetY: 5,
			  fontSize: '24px',
			  color:'#000000',
			  fontWeight:600,
			}
		  }
		}
	  },
	  responsive: [{
		breakpoint: 1600,
		options: {
		 chart: {
			height:150
		  },
		}
	  }

	  ],
	  grid: {
		padding: {
		  top: -10
		}
	  },
	  /* stroke: {
		dashArray: 4,
		colors:'#6EC51E'
	  }, */
	  fill: {
		type: 'gradient',
		colors:'#7A849B',
		gradient: {
			shade: 'black',
			shadeIntensity: 0.15,
			inverseColors: false,
			opacityFrom: 1,
			opacityTo: 1,
			stops: [64, 43, 64, 0.5]
		},
	  },
	  labels: ['Average Results'],
	  };

	  var chart = new ApexCharts(document.querySelector("#redial"), options);
	  chart.render();


  }

  var swiperreview = function() {

	var swiper = new Swiper('.mySwiper', {
		speed: 1500,
		parallax: true,
		slidesPerView: 4,
		spaceBetween: 20,
		autoplay: {
			delay: 1000,
		},
		navigation: {
			nextEl: ".swiper-button-next",
			prevEl: ".swiper-button-prev",
		},
		breakpoints: {

		  300: {
			slidesPerView: 1,
			spaceBetween: 20,
		  },
		  416: {
			slidesPerView: 2,
			spaceBetween: 20,
		  },
		   768: {
			slidesPerView: 2,
			spaceBetween: 20,
		  },
		   1280: {
			slidesPerView: 3,
			spaceBetween: 20,
		  },
		  1788: {
			slidesPerView: 3,
			spaceBetween: 20,
		  },
		},
	});
	$('#container_layout').on('change',function(){
		if($('body').attr('data-container') == "boxed" || "wide-boxed"){
			swiper.params.slidesPerView = 3
		}else{
			swiper.params.slidesPerView = 4
		}
	})
}
















	/* Function ============ */
		return {
			init:function(){
			},


			load:function(){
				NewExperience();
				AllProject();
				overiewChart();
				chartBar();
				expensesChart();
				redial();
				swiperreview();

			},

			resize:function(){
			}
		}

	}();



	jQuery(window).on('load',function(){
		setTimeout(function(){
			dzChartlist.load();
		}, 1000);

	});



})(jQuery);

</script>
{% endblock %}

